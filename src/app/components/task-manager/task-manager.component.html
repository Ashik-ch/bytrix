<!-- Login Screen -->
<div *ngIf="!isLoggedIn"
  class="min-h-screen bg-gradient-to-br from-primary-50 to-accent-50 flex items-center justify-center">
  <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-md">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">Task Manager</h1>
      <p class="text-gray-600">Please login to continue</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="space-y-6">
      <div>
        <label for="username" class="block text-sm font-medium text-gray-700 mb-2">Username</label>
        <input type="text" id="username" formControlName="username"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors"
          placeholder="Enter username">
        <div *ngIf="loginForm.get('username')?.invalid && loginForm.get('username')?.touched"
          class="text-red-500 text-sm mt-1">
          Username is required
        </div>
      </div>

      <div>
        <label for="password" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
        <input type="password" id="password" formControlName="password"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors"
          placeholder="Enter password">
        <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
          class="text-red-500 text-sm mt-1">
          Password is required
        </div>
      </div>

      <div *ngIf="loginError" class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
        {{ loginError }}
      </div>

      <button type="submit" [disabled]="loginForm.invalid"
        class="w-full bg-primary-600 hover:bg-primary-700 disabled:bg-gray-400 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300">
        Login
      </button>
    </form>
  </div>
</div>

<!-- Main Content -->
<div *ngIf="isLoggedIn" class="min-h-screen bg-gray-50">
  <!-- Navbar -->
  <nav class="bg-white shadow-sm border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <h1 class="text-xl font-bold text-gray-900">Task Manager</h1>
        </div>
        <button (click)="logout()"
          class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors duration-300">
          Logout
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

    <!-- Table Section -->
    <div class="bg-white rounded-xl shadow-lg p-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Task/Projects List</h2>

      <div class="overflow-x-auto">
        <table class="w-full table-auto">
          <thead>
            <tr class="bg-gray-50">
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Task Name</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Start Date</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Deadline</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Assignee</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Client Name
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Notes</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let task of taskItems; let i = index" [class]="i % 2 === 0 ? 'bg-white' : 'bg-gray-50'"
              class="hover:bg-gray-100 transition-colors">
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ task.taskName }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ task.startDate }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ task.deadline }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ task.assignee }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ task.clientName }}</td>
              <td class="px-6 py-4 text-sm text-gray-500 max-w-xs truncate">{{ task.notes }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div *ngIf="taskItems.length === 0" class="text-center py-8 text-gray-500">
        No task items found. Add your first project above!
      </div>
    </div>
    <!-- Form Section -->
    <div class="bg-white rounded-xl shadow-lg p-8 mt-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Add New Task/Project</h2>

      <form [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
          <div>
            <label for="taskName" class="block text-sm font-medium text-gray-700 mb-2">Task Name *</label>
            <input type="text" id="taskName" formControlName="taskName"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors">
            <div *ngIf="taskForm.get('taskName')?.invalid && taskForm.get('taskName')?.touched"
              class="text-red-500 text-sm mt-1">
              Task name is required
            </div>
          </div>

          <div>
            <label for="clientName" class="block text-sm font-medium text-gray-700 mb-2">Client Name *</label>
            <input type="text" id="clientName" formControlName="clientName"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors">
            <div *ngIf="taskForm.get('clientName')?.invalid && taskForm.get('clientName')?.touched"
              class="text-red-500 text-sm mt-1">
              Client name is required
            </div>
          </div>

          <div>
            <label for="startDate" class="block text-sm font-medium text-gray-700 mb-2">Start Date *</label>
            <input type="date" id="startDate" formControlName="startDate"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors">
            <div *ngIf="taskForm.get('startDate')?.invalid && taskForm.get('startDate')?.touched"
              class="text-red-500 text-sm mt-1">
              Start date is required
            </div>
          </div>

          <div>
            <label for="deadline" class="block text-sm font-medium text-gray-700 mb-2">Deadline *</label>
            <input type="date" id="deadline" formControlName="deadline"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors">
            <div *ngIf="taskForm.get('deadline')?.invalid && taskForm.get('deadline')?.touched"
              class="text-red-500 text-sm mt-1">
              <span *ngIf="taskForm.get('deadline')?.errors?.['required']">Deadline is required</span>
              <span *ngIf="taskForm.get('deadline')?.errors?.['deadlineAfterStart']">Deadline must be after start
                date</span>
            </div>
          </div>

          <div>
            <label for="assignee" class="block text-sm font-medium text-gray-700 mb-2">Assignee *</label>
            <input type="text" id="assignee" formControlName="assignee"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors">
            <div *ngIf="taskForm.get('assignee')?.invalid && taskForm.get('assignee')?.touched"
              class="text-red-500 text-sm mt-1">
              Assignee is required
            </div>
          </div>

          <div>
            <label for="notes" class="block text-sm font-medium text-gray-700 mb-2">Notes/Description *</label>
            <textarea id="notes" formControlName="notes" rows="4"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors resize-none"></textarea>
            <div *ngIf="taskForm.get('notes')?.invalid && taskForm.get('notes')?.touched"
              class="text-red-500 text-sm mt-1">
              Notes are required
            </div>
          </div>
        </div>

        <div class="flex justify-end">
          <button type="submit" [disabled]="taskForm.invalid"
            class="bg-primary-600 hover:bg-primary-700 disabled:bg-gray-400 text-white font-semibold py-3 px-8 rounded-lg transition-colors duration-300">
            Add Task
          </button>
        </div>
      </form>
    </div>


  </div>
</div>